language: java
env:
  global:
    - secure: "LcYWGXy+SxygnV4oYXvXHWt1oIO0tr6zeHEsG6Av3tTCFaXwpoU9fT8JkjIWGAK4eYGtCidN6gsiYq67pd2gFLMEzpeJ4bNbW4R1NVBH+Q7VOfiA1WYipffT755JL+YkeITj8jmTcKXeJs7qRvIw8r6nTYZy4s6GoJjiSPm9+BscluMLRB5jOFljtQFYQrOV8SWjXwJaC1/+fX+BS7OldQDQntSBz5UZiiOOIH6K3sizi60q/K8uQfq0w9h3/6Z8z6tP8SjCspsYGNssVRTvkea5pFelppfSQWVYAAn3MpgeIS0g2QSPiBS62swIdz+fA6eA0KtXxcUa2Z+0oJ86Sz3o422JQOYGKB78b+YqwScJ5uhsLzGi1BzTePNnRLkv1w+LI5wccOQOmAURKquuD0kcZuOCeZVA+IY1DKpacNyza8luQHAI+y2bY0yNrMtRGLZWt0wtPWyf663F5TeWB+xa8PdDda7+kqdMtDGWaPnZFedAaWj0kVp4SL2ggntT/57Y/Q9LQ496csJbIcX3SMXEg1XqenTCTtAJd8vaBDcg1KKqz6QD6z5SfHqWFlnkN7fpozb2pHwPuFhjIobUXEqn35jdQ6lE2MgTjuP76PEwhCHMWZKsBxW+WlVo1k4BuGrsOw/CkLlcIj903RAgOEkm3p07WUm1sX3fCCuUP+Q="
    - # ^^ OSSRH_JIRA_USERNAME
    - secure: "UVzDJF4PtAKCAJnb1ZXtN11GxzvFQKPaiG3C8mcwC0BPliVUcI/vMSln2F308fJL3vhg2zj4aAXZH1v9MjDfe0UhdhjG0gLFTi/+gE9EKbX9xsuiG3xlvIsQV4tc0V7cJ5GaWM6g+9ulK+e96u3DoTbbuxdfIEoDFA0jsCCCbR3MwUIRR15ylJFSon/tDCHdvtfpt61Kfr97gJXxy8YOgkOR+4D8eafVNocA2QF0S2qjppTeSNe63f2ZUHZmiauif9v0YdTWpF0GwjL9D+LiIf3XPxOBpVJW0zSlFrMuNeqqpY+OIso4yg0+03NO7goKwHPDrmLF/FPnLNPgzwx2G4F+4iqe5BtV4kHRh7XfuCKmijV5HSyjuZ9vXAzQwGLRoAFdD4c7V7MQM8HbkvQ4BkrvNFxLaHqSQAOhOxJYxM2gl2gSW6AAnVAeN3E0SC4OelkCaJST8KKGgA25KdMIPrApKPp3oZJ9pEoL/KjbDQMN1eugrL3yssLYz/kygIXOICfD7YvdJvxlxasBNHHsyMOH376MYcHYxJr5rZMt2Wzatu114x981jFiC1RyglCS07kaV9OimcZHOO4J2lY1XOq6k1FkOxhbAiy5+LqDzCKMT8gOKieUxc2u3I0/so243KwsI0HLqVtD7OojAthoteOBMXLl7qCf4GNwEg6GGKo="
    - # ^^ OSSRH_JIRA_PASSWORD
    - secure: "qCxWc+QYiqEGlI2B694C92AO6K7UIzJ6WySuzLxSRojFacR4V1cZiRAahVi5i6tZ401mb6tVkexsdBVcWeHQul1WHJOhEJ0BDsx6kqDR3ekv0t/5SqHYVrxix7aE82fGPBPTcZlIKFnQ24/Dr/Y5oERVlKfWvZwj03TO8CjWVezYiJSe+beyjO64KVU24YUjQucRxswDTxDkWp5K8YIukd0yKIMuHi1rB6s0MeTPPIdKjDW2O1tmkWkETEC7nJM2rIy6FHP7ziTZbXLNLmdRXwX3GBrFnT2K4Gr2Avi7eq7KoNySEK94pGl4QM70gnxIP4SBNeluGoV4lm5AjU3p1zaqll0SptWRGhw7Ok1wK6PIDE02XidJSTm0i/yEHd2diMXqB0MU+W1eSXM62pNJyLKsU2zt229bFpKFcK+KOu+UxGzkm5ei18wNyHYQSRH3YZRk8xetwS6k2NILIH9NF7abHqMRnXkv22HhhGAso70rdizXCBfvP0T8bNG2HUedd8kLVD5Y6lQIwWwOVidaCGmJysci6sIh5Y/HW4W36N9/cfuMm5r2mzkSPM49J9+1tnPKxwJtWNVqn/gTaOEsNVesBRoI9zPXBq8jt54ipVNVUp65WI0tDrEH/DhK6xqmWdlvaaI7bCN2kUqOCqJNDgwDOCjSFz6ldMAg0HRl0bo="
    - # ^^ GPG_KEY_NAME
    - secure: "i6RxQoA1Ruy5E7dKqvqP3ir75BgToH4c7L3jw5F7iH2TBhIVrBftz/6mQvZ2vrc9G715ifXzbXbZQsE/IDFd/hp++F+0zJIyvOPcZu4MXnNrxvthhiaR3x3MunR9IZ8E5+rdsVkz6CWQXX6WoZIFkCOa/0eNjyimcCM1zCb3M8TU2r8lZot2KANy/JHc7BqytSfIPsnDIIcG/Sx2YRPkPUmdrng4WZPi7N5CvQ4Dv3MtiqAIN1OEKUr2pEXnB8MrVCkSweaB916GWi+xtV+GLo0N/4fSb1Etf/BgLOy4rsGCUu4NWTA2cExDIKm0e/JFdSHd98eW31Uy1aqwwsEVWN3KKGLLsTVVhFxCiw9roiEvZdAYRU2qMnamxn5D9zmmqi4Igc59mRh6pLudwJWfJvdw5RZCGhVeJCws9YWo5x1eQIwRnAc2JvhAIVtqahHQljAAkLCGliKxmGSByRY86m6+DzvnQ9NLK3Ef92M1Z+sdG8zVkfswAl7L3vpUu7ZT1RMxn9RP/vDLgA72WyHuNQV28Fx4xIScKzlR/XLGi5aiJV6MKQKVbB4fzB0Ksr1yxX7K13wqe9wCGKcQIek5i4nOiAazc5JHx1bs0GJxZSY7nSgfYpiaH78accE/UxerLvUb8wmfNrArpQE+oTyVioII700Ybl4Ry/xpffsnnZ0="
    - # ^^ GPG_PASSPHRASE

install: mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn test -P !build-extras -B

cache:
  directories:
    - ~/.m2/repository

before_install:
  - chmod +x ./cd/before-deploy.sh
  - chmod +x ./cd/deploy.sh

after_success:
  - ./cd/before-deploy.sh
  - ./cd/deploy.sh